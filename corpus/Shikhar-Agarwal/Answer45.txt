 Lord Shiva perfectly knew that Ganesh was his son and Ganesh knew that Shiva was his father. A lot of people have questions about dharma: who makes it, is it the same for everyone and so on. Let's dive into mythology to find some answers.Some time after ocean-churning (Samudra manthan), Shiva realized that his great "sacrifice" of drinking poison was in vain - people were misusing money and power, and disorder was prevailing in the society. So he went on penance to think about the situation. During his absence, the situation got worse. Following her dharma to restore balance, Goddess Parvati created Ganesh through her powers whose objective was to bring wealth and prosperity in the world (that's why we associate riddhi-siddhi and shubh-labh with his name). After some time, when Parvati came to know that Shiva is returning, she decided to take a special Suchita bath and dress up to meet him. She instructed Ganesha that no-one should be allowed to enter the chamber.Now Shiva came and went straight to meet his beloved wife after such a long time, only to be stopped by Ganesha. He told him he is his father, but he didn't relent. Other Gods tried to convince Ganesha to let Shiva in, but he mocked them all. Shiva did not become angry for not being able to see Parvati, but because he saw Ganesh having greed, over-confidence, disrespect and ego that had belittled his intelligence. How could Ganesh spread prosperity, when he himself had selfishness? Shiva realized that Ganesh was not fit to fulfill his objective, and punished him by cutting his head. When Parvati came to know about it, she became very angry because of her love and started destroying the world with her powers which forced Shiva to give back Ganesh his life by attaching elephant's head. So in this way, Ganesh also learnt his lesson.It was dharma all along - Parvati's as a mother of the world and of Ganesh; Ganesh's to keep his mother's promise and Shiva's to destroy negative characteristics like ego (tamo-guna) even if the person was his own son. So dharma is situation dependent, is chosen by own self and is different for different people.So Shiva knew about Ganesh, but in the end, even Gods have to follow their dharma.