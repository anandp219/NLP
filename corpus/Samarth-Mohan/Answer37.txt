 Ser Barristan Selmy is an intensely loyal man; one of the old school knights with a strong moral compass guiding his actions. He had received his knighthood at the hands of King Aegon V in a tourney, after he'd defeated both a prince and the (then) Lord Commander of the Kingsguard, at the age of 16.He was sworn in to the Kingsguard himself at the age of 23. And in keeping with tradition, he gave up his claim on his ancestral property and the woman he was betrothed to married someone else.He was a loyal man who owed much to the Targaryens; something he never forgot.He was injured gravely in King Robert's rebellion, and would have been killed (at the recommendation of Roose Bolton) had King Robert not asked the maesters to attend to him. This is again a kindness he didn't forget.Post the rebellion, he joined the Kingsguard under King Robert. But he always had moral reservations about serving him. Most of his reservation for Robert stemmed from knowing that Robert had smiled when Tywin Lannister had presented him with the bodies of Rhaegar's children. Selmy thought that he'd never have served Robert and nothing on earth would have stopped him from killing Robert if he'd himself seen him smile. So Selmy was a reluctant participant in the Baratheon kingship, his real fealty always remaining with the Targaryens, slipping off to join his (metaphorical) forces with Danaerys at the first possible chance.So given his history with the Targaryens and his general sense of unwavering loyalty, Barristan Selmy feels guilty over not defending the Mad King; especially since it resulted in the death of his two kids as well.